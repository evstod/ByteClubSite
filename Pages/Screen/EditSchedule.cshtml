@page
@model ByteClubSite.Pages.Screen.EditScheduleModel
@{ }
@using ByteClubSite.Models;
<form method="post" enctype="multipart/form-data">
    <table id="DT_load" class="table table-striped table-bordered text-light" style="width:100%">
        <thead>
            <tr>
                <th>Period</th>
                <th>Class</th>
                <th>Start Time</th>
                <th>Start Time (late Start)</th>
                <th>Start Time (Early Dismiss)</th>
                <th>Start Time (Activity Schedule)</th>
                <th>Active</th>
            </tr>
            @{ 
                for (int i = 0; i < Model.Agendas.Count(); i++)
                {
                        <tr id="@Model.Agendas[i].Id">
                            <td>@Model.Agendas[i].Id</td>
                            <td>
                                <div>
                                    <input asp-for="@Model.Agendas[i].Class" class="form-control" />
                                </div>
                                <br />
                                <span asp-validation-for="@Model.Agendas[i].Class" class="text-danger"></span>
                            </td>
                            <td style="display: none"><input type="hidden" asp-for="@Model.Agendas[i].Body" /></td>
                            <td>
                                <div>
                                    <input asp-for="@Model.Agendas[i].StartTime" class="form-control" type="time" />
                                </div>
                                <br />
                                <span asp-validation-for="@Model.Agendas[i].StartTime" class="text-danger"></span>
                            </td>
                            <td>
                                <div>
                                    <input asp-for="@Model.Agendas[i].StartLate" class="form-control" type="time" />
                                </div>
                                <br />
                                <span asp-validation-for="@Model.Agendas[i].StartLate" class="text-danger"></span>
                            </td>
                            <td>
                                <div>
                                    <input asp-for="@Model.Agendas[i].StartEarlyDismiss" class="form-control" type="time" />
                                </div>
                                <br />
                                <span asp-validation-for="@Model.Agendas[i].StartEarlyDismiss" class="text-danger"></span>
                            </td>
                            <td>
                                <div>
                                    <input asp-for="@Model.Agendas[i].StartActivity" class="form-control" type="time" />
                                </div>
                                <br />
                                <span asp-validation-for="@Model.Agendas[i].StartActivity" class="text-danger"></span>
                            </td>
                            <td>
                                <div>
                                    <input asp-for="@Model.Agendas[i].Active" class="form-control" type="checkbox" onchange="activeState(@Model.Agendas[i].Id)"/>
                                </div>
                                <br />
                                <span asp-validation-for="@Model.Agendas[i].Active" class="text-danger"></span>
                            </td>
                        </tr>
                }
            }
        </thead>
    </table>
    <input type="submit" value="Update" class="btn btn-primary form-control" />
    <button onclick="AgendasUpdate">Update2</button>
</form>




@section Scripts{
    <partial name="_ValidationScriptsPartial" />
    <script>
        //FIXME
        function activeState(id) {
            if ($('#' + id + ':nth-child(8) div input').val() == false) {
                $('#' + id + ':nth-child(2) div input').val('Inactive');
                $('#' + id + ':nth-child(2) div input').attr('disabled', true);
            }
            else $('#' + id + ':nth-child(2) div input').attr('disabled', false);
        }
    </script>
}
